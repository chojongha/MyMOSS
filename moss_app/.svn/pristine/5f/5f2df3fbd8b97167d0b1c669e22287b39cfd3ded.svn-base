/**
 *		board_open_write.js
 */

var board_open_write_debugPrefix = "[board_open_write.js] : ";

function setBoardWriteSubmit() {
    
    if($("#board_writeSubject").val().length == "") {
        showCommonAlert("제목작성", '제목을 입력하세요');
    }else if($("#board_writeContent").val().length == "") {
        showCommonAlert("내용작성", '내용을 입력하세요');
    }else {
       
        $("#writerid").val(loginId);
        $("#writername").val(userName);
//        $("#write_subject").val($("#board_writeSubject").val());
//        $("#write_content").val($("#board_writeContent").val());
        
        console.log(board_open_write_debugPrefix + "============= 댓글 입력 파라미터 ==========");
        
        console.log(board_open_write_debugPrefix + "writerid = " + $("#writerid").val());
        console.log(board_open_write_debugPrefix + "writername = " + $("#writername").val());
        console.log(board_open_write_debugPrefix + "content = " + $("#board_writeContent").val());
        console.log(board_open_write_debugPrefix + "subject = " + $("#board_writeSubject").val());
   
         $( "#board_write_BDfree" ).submit();
    }
}

function showBoardRequestWrite(formData, jqForm, options) {
    $.mobile.loading( "show", {
          text: "작성 글 업로드...",
          textVisible: true,
          theme: "a",
          html: ""
    });
    
    var queryString = $.param(formData); 
//    alert('About to submit: \n\n' + queryString);
    console.log(board_open_write_debugPrefix + 'About to submit: \n\n' + queryString);

    return true; 
} 

function showBoardResponseWrite(responseText, statusText, xhr, $form)  { 
//    alert('status: ' + statusText + '\n\nresponseText: \n' + responseText + '\n\nThe output div should have already been updated with the responseText.');
    console.log(board_open_write_debugPrefix + 'status: ' + statusText + '\n\nresponseText: \n' + responseText + '\n\nThe output div should have already been updated with the responseText.');
   
    $.mobile.hidePageLoadingMsg();
   
//    getBoardOpenDetailPage();
    
    $("#board_writeSubject").val("");
    
    
} 

var boardWriteOptions = { 
        beforeSubmit:  showBoardRequestWrite,    // pre-submit callback 
        success:       showBoardResponseWrite,   // post-submit callback
        url : url + "WriteBDFree",
        dataType:  "json",              // 'xml', 'script', or 'json' (expected server response type)
        clearForm: true,                // clear all form fields after successful submit 
        resetForm: true,                // reset the form after successful submit 
        timeout:   10*1000
};




$(document).on("pageshow","#page_board_open_write",function(event){
    
    
    $('#btn_boardSubmit').click(function(){
        
        setBoardWriteSubmit();
    });
    
    $("#board_write_BDfree").attr("data-ajax", false);
   
    
    $("#board_write_BDfree").ajaxForm(boardWriteOptions);
    // ajax 폼 전송
}); 


