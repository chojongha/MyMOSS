//라디오버튼생성


//라디오 버튼 선택후 확인 클릭시 파라미터 전송
function SendParameter(){
	
	var isChecked=$(":input:radio[name=manual]:checked").val();
	
	if(isChecked=='고객전송'){
		$(location).attr('href','board_manual.html?checked=고객전송');
		
	}else if(isChecked=="기간전송"){
		$(location).attr('href','board_manual.html?checked=기간전송');
	
	}else if(isChecked=="인터넷"){ 
		$(location).attr('href','board_manual.html?checked=인터넷');
	
	}else if(isChecked=="전원"){
		$(location).attr('href','board_manual.html?checked=전원');
	
	}else if(isChecked=="교환"){
		$(location).attr('href','board_manual.html?checked=교환');
	
	}else if(isChecked=="초고속"){
		$(location).attr('href','board_manual.html?checked=초고속');
	
	}else{
		$(location).attr('href','board_manual.html?checked=고객망');
	}
}

//get parameter
	var getParam = function(key){
	    var _parammap = {};
	    document.location.search.replace(/\??(?:([^=]+)=([^&]*)&?)/g, function () {
	        function decode(s) {
	            return decodeURIComponent(s.split("+").join(" "));
	        }

	        _parammap[decode(arguments[1])] = decode(arguments[2]);
	    });

	    return _parammap[key];
	};
	
//get parameter 끝
	
var board_manual_debugPrefix = "[manual.js] : ";

//메뉴얼 페이지열리면 바로 실행
$(document).on("pageshow","#page_manualList",function(event){
	
/*	var userId = getUserID();
	
	$ajax({
//		url: "http://192.168.25.18:8080/moss/WorkOdrList",
		url: "http://192.168.25.17:8080/moss/WorkOdrList",
		type: "post",
		timeout: 10 * 1000,
		dataType: "json",
		data: {workerID:userId},
		success: function(result){
			var bodyData=result.body;
			var radioB="";
			
			if(bodyData.length>0){
				$.each(bodyData, function(key,val){
					radioB += "<fieldset data-role='controlgroup'>"+
							  "	<p style='text-align: center;'>업무매뉴얼 분야</p>"+
							  "		<input type='radio' name='manual' data-theme='d' data-iconpos='right' id='RaOne' value='radio1' checked='checked'> "+
							  "		<label for='RaOne'>"+val.custName+"</label>"+
							  "</fieldset>";
				});
				$("#popup_manual").append(radioB).popup_manual("refresh");
			}else{
				alert('없음')
			}			
		},
		error: function(jqXHR, textStatus, errorThrown) {
			$.mobile.hidePageLoadingMsg();
//			location.reload;
//	        alert(textStatus); // this will be "timeout"
	        console.log(board_manual_debugPrefix + "고장상황 리스트 출력 에러 : " + jqXHR.status);
	        console.log(board_manual_debugPrefix + "고장상황 리스트 출력 에러 : " + jqXHR.responseText);
			console.log(board_manual_debugPrefix + "고장상황 리스트 출력 에러 : " + errorThrown);
	    }	
	}); */
		
	var choice = getParam("checked");
	
	if(choice=="고객전송"){
		$('#manualField > option[value="customerSend"]').attr("selected","selected");
		$("#manualField").selectmenu( "refresh" );
	}else if(choice=="기간전송"){
		$('#manualField > option[value="dateSend"]').attr("selected","selected");
		$("#manualField").selectmenu( "refresh" );
	}else if(choice=="인터넷"){
		$('#manualField > option[value="internet"]').attr("selected","selected");
		$("#manualField").selectmenu( "refresh" );
	}else if(choice=="전원"){
		$('#manualField > option[value="switch"]').attr("selected","selected");
		$("#manualField").selectmenu( "refresh" );
	}else if(choice=="교환"){
		$('#manualField > option[value="change"]').attr("selected","selected");
		$("#manualField").selectmenu( "refresh" );
	}else if(choice=="초고속"){
		$('#manualField > option[value="speed"]').attr("selected","selected");
		$("#manualField").selectmenu( "refresh" );
	}else{
		$('#manualField > option[value="customerNet"]').attr("selected","selected");
		$("#manualField").selectmenu( "refresh" );
	}
	
	console.log(board_manual_debugPrefix + "pageshow");
	
	var userId = getUserID();
	console.log(board_manual_debugPrefix + userId);
	
	// 페이지가 보여지면서 로더를 보여준다.
	$.mobile.loading( "show", {
		  text: "목록 조회 중 입니다.",
		  textVisible: true,
		  theme: "z",
		  html: ""
	});
			
	$.ajax({
//		url: "http://192.168.123.145:8080/moss/WorkOdrList",
//		url: "http://moss.kt.com/moss/WorkOdrList",
//		url: "http://192.168.25.18:8080/moss/WorkOdrList",
		url: "http://192.168.25.17:8080/moss/WorkOdrList",
		type: "post",
		timeout: 10 * 1000,
		dataType: "json",
		data: {workerID:userId},	//	김과장님 사번으로 데이터가 존재
		success: function (result) {
			var bodyData = result.body;
			var liText = "";
			
			if(bodyData.length > 0) {
				$.each(bodyData, function(key, val){
					liText += 	"<li data-icon='false'> "+
				    			"	<a href='board_manual_detail.html?workOdrNum="+ val.workOdrNum +"&workOdrKind=R&odrType=I' data-ajax='false' data-rel='external'>" +
				    			"		<h2><img src='' style='width:20px; height:20px'>"+ decodeURI(val.addr) +"</h2>" +
				    			"		<p><strong>"+ val.rsvDT +"</strong><span>"+ val.odrType +"</span></p>" +
				    			"	</a>" +
				    			"</li>";
			    });
				$("#manualList").append(liText).listview("refresh");
			} else {
				liText += 	"<li data-icon='false'> "+
    			"	<a href='#'>" +
    			"		<center><h2>데이터가 존재하지 않습니다.</h2></center>" +
    			"		<p></p>" +
    			"	</a>" +
    			"</li>";
				$("#manualList").append(liText).listview("refresh");
//				alert("데이터가 존재하지 않습니다.");
			}
			// 화면에 리스트 출력이 완료되면 loader를 종료
			$.mobile.hidePageLoadingMsg();
			console.log(board_manual_debugPrefix + "고장상황 리스트 출력 완료");
		},
		error: function(jqXHR, textStatus, errorThrown) {
			$.mobile.hidePageLoadingMsg();
//			location.reload;
//	        alert(textStatus); // this will be "timeout"
	        console.log(board_manual_debugPrefix + "고장상황 리스트 출력 에러 : " + jqXHR.status);
	        console.log(board_manual_debugPrefix + "고장상황 리스트 출력 에러 : " + jqXHR.responseText);
			console.log(board_manual_debugPrefix + "고장상황 리스트 출력 에러 : " + errorThrown);
	    }
	}); 
}); 

//검색기능
function filter(){
	if($('#word').val()=="")
		$("#manualList li").css('display','');
		else{
		$("#manualList li").css('display','none');
		$("#manualList > li:contains('"+$('#word').val()+"')").css('display','');
	}
	return false;
}
	
